import{_ as J}from"./Card-BQRz5rvr.js";import{c as i,k as n,F as f,d as k,q as H,O as M,b as a,a as s,P as K,r as y,u as Q,y as W,o as X,z as Y,A as Z,B as ee,_ as te,t as w,e as U,g as v,w as D,f as se,h as le,i as ae,C as oe,D as ne,m as T,G as re,E as ie,p as ce}from"./index-BKCPoiO_.js";import{_ as ue}from"./Carousel-Dr4w24T6.js";import{_ as de}from"./Skeleton-BBuTXwCT.js";import{_ as _e}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as P,b as me}from"./api-C3-D-LcZ.js";import{_ as fe}from"./SkeletonRetry-DfYmiy5b.js";import{_ as pe}from"./NewsCard-BfYnCDs9.js";import{_ as ve}from"./ShareModal-CZbFMVR9.js";import"./index-xsH4HHeE.js";import"./Modal-BCB_kUz-.js";import"./useId-B5SgPQru.js";const j={__name:"Divider",props:{leng:{type:String,default:30},style:{type:String,default:"height: 1.25px;"},class:{type:String,default:"bg-gray-300"}},setup(z){const _=z;return(r,b)=>(n(),i("div",{class:"grid gap-2 my-4",style:M({gridTemplateColumns:`repeat(${_.leng}, minmax(0, 1fr))`})},[(n(!0),i(f,null,k(parseInt(_.leng),m=>(n(),i("div",{style:M(_.style),class:H(`w-full ${_.class}`)},null,6))),256))],4))}},he={},ge={class:"w-full bg-white shadow-sm p-3 space-y-3"},ye={class:"grid grid-cols-2"},we={class:"flex items-center gap-2"},ke={class:"w-full"};function be(z,_){const r=de,b=j;return n(),i("div",ge,[a(r,{class:"h-60 w-full rounded-md"}),s("div",ye,[s("div",we,[a(r,{class:"size-4 rounded-full"}),a(r,{class:"h-3 w-full rounded-md"})])]),a(r,{class:"h-3 w-full rounded-md"}),a(r,{class:"h-3 w-full rounded-md"}),s("div",ke,[a(b,{leng:"25"})]),(n(),i(f,null,k(5,m=>a(r,{key:m,class:"h-3 w-full rounded-md"})),64)),a(r,{class:"h-40 w-full rounded-md"}),(n(),i(f,null,k(5,m=>a(r,{key:m,class:"h-3 w-full rounded-md"})),64)),a(r,{class:"h-40 w-full rounded-md"})])}const xe=_e(he,[["render",be]]),$e={class:"fixed top-0 left-0 w-full h-13 shadow-md background z-101"},Se={class:"flex justify-start items-center gap-3 h-full px-2"},Ce={class:"truncate_wrap flex-1 text-white text-lg font-semibold"},ze={class:"py-13"},Ne={class:"relative w-full h-60"},Ue={class:"relative w-full h-60"},De=["src","alt"],Te=["data-src"],Be={class:"absolute bottom-5 left-5 z-100 flex gap-2"},Ve=["onClick"],Re={class:"absolute -bottom-5 right-3"},Ee={class:"mt-3 space-y-1"},Fe={class:"flex items-center gap-1"},Le={class:"text-13"},Me={class:"flex items-center gap-1"},Pe={class:"text-13"},He={class:"text-default text-lg leading-7.5 font-semibold"},je={class:"w-full"},Ae=["innerHTML"],qe={class:"p-3 space-y-2"},Ge={class:"text-lg font-semibold mb-2"},lt={__name:"NewsDetail",setup(z){const _=K(),r=le(),b=ae(),m=y(!1),o=y(null),p=y(null),h=y(null),B=Q("carousel"),x=y(0),g=W({});X(()=>{var e;N(((e=o.value)==null?void 0:e.title)||null)}),Y(()=>r.params.id,async e=>{var l,c;const t=_.details[e]||null;if((t==null?void 0:t.news)!==null&&String((l=t==null?void 0:t.news)==null?void 0:l.id)===String(e)){o.value=(t==null?void 0:t.news)||null,p.value=(t==null?void 0:t.related)||null,N(((c=o.value)==null?void 0:c.title)||null);return}V(e)},{immediate:!0});async function V(e){var t;try{h.value=o.value=p.value=null,m.value=!0;const l=await P(e),c=await P(e,"related");l.data&&(o.value=l.data[0]||null),c.data&&(p.value=c.data),N(((t=o.value)==null?void 0:t.title)||null),_.setDetails(e,{news:o.value||null,related:p.value||null}),l.data||(h.value="No news found")}catch(l){h.value=l.toString()}finally{m.value=!1,window.scrollTo(0,0)}}const A=()=>{b.back()};function q(e){x.value=e}function G(e){var t,l;x.value=e,(l=(t=B.value)==null?void 0:t.emblaApi)==null||l.scrollTo(e)}const O=async e=>{let t=me+((e==null?void 0:e.id)||"");if(g.currentUrl=t,window.FlutterChannel)window.FlutterChannel.postMessage("link:"+t);else if(navigator.share)try{await navigator.share({title:(e==null?void 0:e.title)||"title",text:(e==null?void 0:e.post_content)||"description",url:t})}catch(l){console.error("Share failed:",l)}else g.shared=!0};function N(e=null){document.title=e||Z}return ee(()=>{var c,$;const e=((c=o.value)==null?void 0:c.title)||"",t=`${e}, ${(($=o.value)==null?void 0:$.post_content)||""}`,l=String(e).replace(" ",", ");oe({meta:[...ne,{name:"keywords",content:l},{name:"description",content:t},{property:"og:description",content:t}]})}),(e,t)=>{const l=te,c=xe,$=ue,R=re,I=J;return n(),i(f,null,[s("header",$e,[s("div",Se,[a(l,{icon:"i-lucide-arrow-left",size:"xl",color:"primary",variant:"solid",onClick:A}),s("h2",Ce,w(e.$t("message.news")),1)])]),s("main",ze,[m.value?(n(),U(c,{key:0})):h.value?(n(),U(fe,{key:1,error:h.value,retryPage:V(v(r).params.id||"1")},null,8,["error","retryPage"])):(n(),i(f,{key:2},[a(I,{variant:"soft",class:"w-full bg-white shadow-sm rounded-none",ui:{body:"p-3 sm:p-3"}},{default:D(()=>{var S,C,E,F;return[s("div",Ne,[a($,{ref_key:"carousel",ref:B,items:((S=o.value)==null?void 0:S.photos)||[],class:"w-full",onSelect:q,autoplay:{delay:1e4}},{default:D(({item:d})=>{var u;return[s("div",Ue,[s("img",{src:d||v(T),class:"rounded-md w-full h-full object-cover",alt:(u=o.value)==null?void 0:u.title,onError:t[0]||(t[0]=L=>L.target.src=v(T))},null,40,De),s("div",{"data-fancybox":"gallery","data-src":`${d||v(T)}`,class:"absolute top-0 left-0 w-full h-full bg-black opacity-0 rounded-md"},null,8,Te)])]}),_:1},8,["items"]),s("div",Be,[(n(!0),i(f,null,k(((C=o.value)==null?void 0:C.photos)||[],(d,u)=>(n(),i("span",{key:u,class:H(["w-2 h-2 rounded-full cursor-pointer transition-opacity",{"bg-white opacity-100":x.value===u,"bg-white/50 opacity-50":x.value!==u}]),onClick:L=>G(u)},null,10,Ve))),128))]),s("div",Re,[a(l,{icon:"i-lucide-share-2",size:"xl",color:"primary",variant:"solid",class:"rounded-full shadow-md p-3",onClick:t[1]||(t[1]=d=>O(o.value))}),a(ve,{modelValue:g.shared,"onUpdate:modelValue":t[2]||(t[2]=d=>g.shared=d),currentUrl:g.currentUrl||""},null,8,["modelValue","currentUrl"])])]),s("div",Ee,[a(l,{as:"div",color:"neutral",variant:"ghost",size:"sm",class:"text-muted p-0",ui:{base:"hover:bg-white"}},{default:D(()=>{var d,u;return[s("div",Fe,[a(R,{name:"i-lucide-calendar-days",class:"size-3.5"}),s("p",Le,w(v(ie)(((d=o.value)==null?void 0:d.post_date)||""))+" |",1)]),s("div",Me,[a(R,{name:"i-lucide-eye",class:"size-4"}),s("p",Pe,w(v(ce)(((u=o.value)==null?void 0:u.view)||"0")),1)])]}),_:1}),s("h2",He,w(((E=o.value)==null?void 0:E.title)||""),1),s("div",je,[a(j,{leng:"25"})]),s("article",{class:"article-content text-default text-15 leading-6.5 space-y-3",innerHTML:((F=o.value)==null?void 0:F.post_content)||""},null,8,Ae)])]}),_:1}),s("div",qe,[s("h1",Ge,w(e.$t("message.read_next")),1),p.value?(n(!0),i(f,{key:0},k(p.value,(S,C)=>(n(),U(pe,{key:C,item:S},null,8,["item"]))),128)):se("",!0)])],64))])],64)}}};export{lt as default};
