import{_ as fe}from"./GridCard-2lkemERU.js";import{c as v,k as _,a as e,b as a,w as u,_ as le,F as C,d as q,v as he,x as pe,r as w,u as ve,y as ge,o as we,z as se,A as xe,B as be,t as o,e as P,g as c,f as M,h as ye,i as $e,C as ke,D as ze,m as L,q as Ce,n as Ue,p,E as Se,G as Te,s as F,H as je,I as De,J as Be,K as Re}from"./index-BKCPoiO_.js";import{_ as Le}from"./Card-BQRz5rvr.js";import{_ as Ve}from"./Carousel-Dr4w24T6.js";import{s as Fe,g as te}from"./api-C3-D-LcZ.js";import{_ as Ie}from"./Skeleton-BBuTXwCT.js";import{_ as Ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as Ae}from"./SkeletonRetry-DfYmiy5b.js";import{_ as Ee}from"./LoanTermDrawer-BtK9iyXx.js";import{_ as Pe}from"./ShareModal-CZbFMVR9.js";import"./index-xsH4HHeE.js";import"./Modal-BCB_kUz-.js";import"./useId-B5SgPQru.js";const Me={},qe={class:"bg-white shadow-sm p-3 space-y-3"},Ge={class:"grid grid-cols-5"},He={class:"col-span-3"},Je={class:"col-span-2 flex items-center justify-end"},Ke={class:"p-3"},We={class:"grid grid-cols-2 gap-2"},Oe={class:"text-start text-sm w-3/4 space-y-2"},Qe={class:"p-3 pt-0"},Xe={class:"bg-white shadow-sm p-3 rounded-md"},Ye={class:"space-y-2"};function Ze(ae,b){const r=Ie,x=le;return _(),v(C,null,[e("div",qe,[a(r,{class:"h-60 w-full rounded-md"}),a(r,{class:"h-4 w-full rounded-md"}),e("div",Ge,[e("div",He,[a(x,{color:"neutral",variant:"outline",size:"lg",class:"w-3/4"},{default:u(()=>[a(r,{class:"size-4 w-full rounded-full"}),a(r,{class:"h-4 w-full rounded-md"})]),_:1})]),e("div",Je,[a(x,{as:"div",color:"neutral",variant:"",size:"lg",class:"w-full"},{default:u(()=>[a(r,{class:"size-4 w-full rounded-full"}),a(r,{class:"h-4 w-full rounded-md"})]),_:1})])])]),e("div",Ke,[b[0]||(b[0]=e("h2",{class:"text-base font-semibold mb-3"},"Specifications",-1)),e("div",We,[(_(),v(C,null,q(4,I=>a(x,{color:"neutral",variant:"soft",size:"lg",class:"shadow-sm bg-white"},{default:u(()=>[a(r,{class:"size-10 rounded-full"}),e("div",Oe,[a(r,{class:"h-3 w-full"}),a(r,{class:"h-3 w-full"})])]),_:1})),64))])]),e("div",Qe,[e("div",Xe,[b[1]||(b[1]=e("h2",{class:"text-base font-semibold mb-2"},"Description",-1)),e("div",Ye,[a(r,{class:"h-3 w-full"}),a(r,{class:"h-3 w-full"}),a(r,{class:"h-3 w-full"}),a(r,{class:"h-3 w-full"}),a(r,{class:"h-3 w-full"}),a(r,{class:"h-3 w-full"}),a(r,{class:"h-3 w-full"})])])])],64)}const es=Ne(Me,[["render",Ze]]),ss={class:"fixed top-0 left-0 w-full h-13 shadow-md background z-[101]"},ts={class:"flex justify-between items-center h-full px-2"},ls={class:"truncate_wrap text-white text-lg font-semibold"},as={class:"py-13"},os={class:"bg-white shadow-sm p-3 space-y-2"},ns={class:"relative w-full h-60"},is={class:"relative w-full h-60"},rs=["src","alt"],cs=["data-src"],ds={class:"absolute bottom-5 left-5 z-[100] flex gap-2"},us=["onClick"],_s={class:"text-default text-base font-semibold"},ms={class:"grid grid-cols-5 pb-2"},fs={class:"col-span-3"},hs={class:"text-lg"},ps={key:0,class:"text-13"},vs={class:"col-span-2 flex items-center justify-end"},gs={class:"text-13"},ws={class:"flex items-center gap-1"},xs={class:"text-13"},bs={class:"p-3"},ys={class:"text-base font-semibold mb-3"},$s={class:"grid grid-cols-2 gap-2"},ks={class:"size-9 bg-primary rounded-full flex-center"},zs={class:"text-start text-sm"},Cs={class:"text-muted"},Us={class:"p-3 pt-0"},Ss={class:"bg-white shadow-sm p-3 rounded-md"},Ts={class:"text-base font-semibold mb-2"},js={class:"text-default text-15 leading-6.5"},Ds={key:0,class:"p-3 pt-0"},Bs={class:"flex items-center justify-between"},Rs={class:"truncate_wrap text-base font-semibold"},Ls={class:"flex-center flex-col my-5 gap-2 font-semibold"},Vs={class:"flex-center gap-1"},Fs={class:"flex items-end gap-1"},Is={class:"text-4xl text-primary leading-none"},Ns={class:"text-sm"},As={class:"text-sm"},Es={class:"grid grid-cols-3 gap-1 font-semibold"},Ps={class:"flex-center flex-col gap-1 text-center"},Ms={class:"text-xs"},qs={class:"text-xs"},Gs={class:"text-base"},Hs={class:"flex-center flex-col gap-1 text-center"},Js={class:"text-xs"},Ks={class:"text-xs"},Ws={class:"text-base"},Os={class:"flex-center flex-col gap-1 text-center"},Qs={class:"text-xs"},Xs={class:"text-xs"},Ys={class:"text-base"},Zs={class:"p-3 pt-0"},et={class:"flex-center flex-col gap-2 mt-3"},st={class:"size-16"},tt=["src","alt"],lt={class:"text-lg font-semibold"},at={class:"space-y-2"},ot={class:"flex items-center gap-3"},nt={class:"text-sm font-semibold"},it={key:1,class:"p-3 pt-0"},rt={class:"text-base font-semibold mb-3"},ct={class:"fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 -shadow-lg z-[100]"},dt={class:"grid grid-cols-2"},ut={class:"flex flex-col items-center justify-center w-full gap-1"},_t={class:"flex flex-col items-center justify-center w-full gap-1"},Ct={__name:"Detail",setup(ae){const b=he(),r=pe(),x=ye(),I=$e(),N=w(!1),G=ve("carousel"),V=w(0),A=w(!1),i=w(null),y=w(null),U=w(null),h=w(null),$=w(24),H=w(7),S=ge({});let oe={"car-model":"i-lucide-car-front","car-year":"i-lucide-calendar-days",condition:"i-lucide-car","tax-type":"i-lucide-file-text"};we(()=>{var s;K(((s=i.value)==null?void 0:s.ad_headline)||null)}),se([()=>i.value,()=>$.value],([s,t])=>{s&&(ce(s),K((s==null?void 0:s.ad_headline)||null))},{immediate:!0}),se(()=>x.params.id,async(s,t)=>{var m;const l=r.details[s]||null;if((l==null?void 0:l.post)!==null&&String((m=l==null?void 0:l.post)==null?void 0:m.id)===String(s)){i.value=(l==null?void 0:l.post)||null,y.value=(l==null?void 0:l.related)||null;return}J(s)},{immediate:!0});async function J(s){var t;try{U.value=i.value=y.value=null,A.value=!0;const l=await te(s),m=await te(null,"related",{model:((t=x.params)==null?void 0:t.slug)||""});l.data&&(i.value=l.data||null,m.data&&(y.value=m.data.filter(k=>k.id!==l.data.id)),r.setDetails(s,{post:l.data||null,related:y.value||null})),l.data||(U.value="No post found")}catch(l){U.value=l.toString()}finally{A.value=!1}}const ne=()=>{I.back()};function ie(s){V.value=s}function re(s){var t,l;V.value=s,(l=(t=G.value)==null?void 0:t.emblaApi)==null||l.scrollTo(s)}const ce=async s=>{const t=Re({salePrice:s==null?void 0:s.ad_price,interest:H.value,downPrice:0,downRate:0,term:$.value});t!==null&&(h.value=t)};function de(){b.setTerm($.value),b.setProduct(i.value),Be(x,I,"banks")}const ue=async s=>{let t=String((s==null?void 0:s.ad_headline)||"").replaceAll(" ","-").toLocaleLowerCase(),l=Fe+t+"-adid-"+((s==null?void 0:s.id)||"")+".html";if(S.currentUrl=l,window.FlutterChannel)window.FlutterChannel.postMessage("link:"+l);else if(navigator.share)try{await navigator.share({title:(s==null?void 0:s.ad_headline)||"title",text:(s==null?void 0:s.ad_text)||"description",url:l})}catch(m){console.error("Share failed:",m)}else S.shared=!0},E=(s,t)=>{let l=(t==null?void 0:t.phone)||"";window.FlutterChannel&&window.FlutterChannel.postMessage(s+l)};function K(s=null){document.title=s||xe}return be(()=>{var m,k,g;const s=((m=i.value)==null?void 0:m.field)||[],t=`${((k=i.value)==null?void 0:k.ad_headline)||""}, ${((g=i.value)==null?void 0:g.ad_text)||""}`,l=s.map(T=>`${T.title}, ${T.value}`).join(", ");ke({meta:[...ze,{name:"keywords",content:l},{name:"description",content:t},{property:"og:description",content:t}]})}),(s,t)=>{var W,O,Q,X,Y,Z,ee;const l=le,m=Ve,k=Ue,g=Te,T=Le,_e=je,me=fe;return _(),v(C,null,[e("header",ss,[e("div",ts,[a(l,{icon:"i-lucide-arrow-left",size:"xl",color:"primary",variant:"solid",onClick:ne}),e("h2",ls,o(s.$t("message.details")),1),a(l,{icon:"i-lucide-share-2",size:"xl",color:"primary",variant:"solid",onClick:t[0]||(t[0]=n=>ue(i.value))}),a(Pe,{modelValue:S.shared,"onUpdate:modelValue":t[1]||(t[1]=n=>S.shared=n),currentUrl:S.currentUrl||""},null,8,["modelValue","currentUrl"])])]),e("main",as,[A.value?(_(),P(es,{key:0})):U.value?(_(),P(Ae,{key:1,error:U.value,retryPage:J(c(x).params.id||"")},null,8,["error","retryPage"])):(_(),v(C,{key:2},[e("div",os,[e("div",ns,[a(m,{ref_key:"carousel",ref:G,items:((W=i.value)==null?void 0:W.ad_photo)||[],class:"w-full",onSelect:ie,autoplay:{delay:1e4}},{default:u(({item:n})=>[e("div",is,[e("img",{src:String(n||c(L)).replace("https://imagescdn.khmer24.com","https://images.khmer24.co"),class:"rounded-md w-full h-full object-cover",alt:n==null?void 0:n.title,onError:t[2]||(t[2]=d=>d.target.src=c(L))},null,40,rs),e("div",{"data-fancybox":"gallery","data-src":`${String(n||c(L)).replace("https://imagescdn.khmer24.com","https://images.khmer24.co")}`,class:"absolute top-0 left-0 w-full h-full bg-black opacity-0 rounded-md"},null,8,cs)])]),_:1},8,["items"]),e("div",ds,[(_(!0),v(C,null,q(((O=i.value)==null?void 0:O.ad_photo)||[],(n,d)=>(_(),v("span",{key:d,class:Ce(["w-2 h-2 rounded-full cursor-pointer transition-opacity",{"bg-white opacity-100":V.value===d,"bg-white/50 opacity-50":V.value!==d}]),onClick:z=>re(d)},null,10,us))),128))])]),e("h2",_s,o(((Q=i.value)==null?void 0:Q.ad_headline)||""),1),e("div",ms,[e("div",fs,[a(l,{as:"div",color:"primary",variant:"outline",size:"sm",ui:{base:"hover:bg-white"}},{default:u(()=>{var n,d;return[a(k,{text:"$",size:"xs",class:"background",ui:{fallback:"text-white text-base"}}),e("p",hs,o(c(p)(((n=i.value)==null?void 0:n.ad_price)||"0")),1),h.value?(_(),v("p",ps,"| "+o(c(p)(((d=h.value)==null?void 0:d.monthly)||0))+"/"+o(s.$t("message.m")),1)):M("",!0)]}),_:1})]),e("div",vs,[a(l,{as:"div",color:"neutral",variant:"ghost",size:"sm",class:"text-muted",ui:{base:"hover:bg-white"}},{default:u(()=>{var n,d;return[e("p",gs,o(c(Se)(((n=i.value)==null?void 0:n.renew_date)||""))+" |",1),e("div",ws,[a(g,{name:"i-lucide-eye",class:"size-4"}),e("p",xs,o(((d=i.value)==null?void 0:d.views)||"0"),1)])]}),_:1})])])]),e("div",bs,[e("h2",ys,o(s.$t("message.spacifications")),1),e("div",$s,[(_(!0),v(C,null,q(((X=i.value)==null?void 0:X.field)||[],n=>(_(),P(l,{as:"div",color:"neutral",variant:"soft",size:"lg",class:"capitalize shadow-sm bg-white",ui:{base:"hover:bg-white"}},{default:u(()=>[e("div",ks,[a(g,{name:c(oe)[`${n==null?void 0:n.slug}`]||"i-lucide-car-front",class:"size-5.5 text-white"},null,8,["name"])]),e("div",zs,[e("h3",Cs,o((n==null?void 0:n.title)||""),1),e("p",null,o((n==null?void 0:n.value)||""),1)])]),_:2},1024))),256))])]),e("div",Us,[e("div",Ss,[e("h2",Ts,o(s.$t("message.description")),1),e("p",js,o(((Y=i.value)==null?void 0:Y.ad_text)||""),1)])]),h.value?(_(),v("div",Ds,[a(T,{variant:"soft",class:"bg-white shadow-sm",ui:{body:"p-4 sm:p-4"}},{default:u(()=>{var n,d,z,j,D,B,R;return[e("div",Bs,[e("h2",Rs,o(s.$t("message.estimate_payment")),1),a(l,{"trailing-icon":"i-lucide-ellipsis-vertical",size:"md",variant:"ghost",onClick:t[3]||(t[3]=f=>N.value=!0),class:"pr-0"},{default:u(()=>[F(o(s.$t("message.loan_term"))+": "+o(parseInt($.value/12))+o(s.$t("message.y")),1)]),_:1}),a(Ee,{open:N.value,"onUpdate:open":t[4]||(t[4]=f=>N.value=f),modelTerm:$.value,"onUpdate:modelTerm":t[5]||(t[5]=f=>$.value=f)},null,8,["open","modelTerm"])]),t[12]||(t[12]=e("hr",{class:"my-3 border-gray-300"},null,-1)),e("div",Ls,[e("div",Vs,[t[11]||(t[11]=e("p",{class:"text-sm text-primary"},"$",-1)),e("div",Fs,[e("h1",Is,o(c(p)(((n=h.value)==null?void 0:n.monthly)||0)),1),e("p",Ns,"/ "+o(s.$t("message.month")),1)])]),e("h2",As,o(s.$t("message.car_price"))+": $ "+o(c(p)(((d=i.value)==null?void 0:d.ad_price)||0)),1)]),e("div",Es,[e("div",Ps,[e("p",Ms,o(s.$t("message.down_payment")),1),e("p",qs,o(c(p)(((z=h.value)==null?void 0:z.downRate)||0))+"%",1),e("p",Gs,"$ "+o(c(p)(((j=h.value)==null?void 0:j.downPayment)||0)),1)]),e("div",Hs,[e("p",Js,o(s.$t("message.loan_amount")),1),e("p",Ks,o(100-c(p)(((D=h.value)==null?void 0:D.downRate)||0))+"%",1),e("p",Ws,"$ "+o(c(p)(((B=h.value)==null?void 0:B.loanAmt)||0)),1)]),e("div",Os,[e("p",Qs,o(s.$t("message.total_interest")),1),e("p",Xs,o(c(p)(H.value))+"%",1),e("p",Ys,"$ "+o(c(p)(((R=h.value)==null?void 0:R.fullInterest)||0)),1)])]),a(l,{type:"submit",class:"w-full flex-center mt-5",variant:"soft",size:"xl",onClick:t[6]||(t[6]=f=>{de()})},{default:u(()=>[F(o(s.$t("message.apply_loan")),1)]),_:1})]}),_:1,__:[12]})])):M("",!0),e("div",Zs,[a(T,{variant:"soft",class:"bg-white shadow-sm",ui:{body:"p-4 sm:p-4"}},{default:u(()=>{var n,d,z,j,D,B,R;return[e("div",et,[e("div",st,[e("img",{class:"w-full h-full rounded-full border object-cover",src:((n=i.value)==null?void 0:n.link)||c(L),alt:((d=i.value)==null?void 0:d.name)||"",onError:t[7]||(t[7]=f=>f.target.src=c(L))},null,40,tt)]),e("h2",lt,o(((z=i.value)==null?void 0:z.name)||""),1)]),t[13]||(t[13]=e("hr",{class:"my-4 border-1 border-gray-300"},null,-1)),e("div",at,[e("div",{class:"flex items-center gap-3",onClick:t[8]||(t[8]=f=>E("call:",i.value))},[a(g,{name:"i-lucide-phone",class:"size-4"}),a(_e,{to:"tel:"+(((j=i.value)==null?void 0:j.phone)||""),class:"text-default text-sm font-semibold"},{default:u(()=>{var f;return[F(o(((f=i.value)==null?void 0:f.phone)||""),1)]}),_:1},8,["to"])]),e("div",ot,[a(g,{name:"i-lucide-map-pin",class:"size-4"}),e("p",nt,o(((D=i.value)==null?void 0:D.address)||""),1)]),a(l,{size:"xl",color:"primary",variant:"soft",class:"w-full flex-center mt-3",to:c(De)(((B=i.value)==null?void 0:B.map_lat)||"",((R=i.value)==null?void 0:R.map_lng)||"")},{default:u(()=>[F(o(s.$t("message.show_map")),1)]),_:1},8,["to"])])]}),_:1,__:[13]})]),y.value&&y.value.length>0?(_(),v("div",it,[e("h2",rt,o(s.$t("message.related_model")),1),a(me,{posts:y.value},null,8,["posts"])])):M("",!0)],64))]),e("footer",ct,[e("div",dt,[a(l,{color:"primary",variant:"soft",ui:{base:"w-full h-13 rounded-none bg-white"},onClick:t[9]||(t[9]=n=>E("call:",i.value)),to:"tel:"+(((Z=i.value)==null?void 0:Z.phone)||"")},{default:u(()=>[e("div",ut,[a(g,{name:"i-lucide-phone",class:"size-6"})])]),_:1},8,["to"]),a(l,{color:"primary",variant:"soft",ui:{base:"w-full h-13 rounded-none bg-white"},onClick:t[10]||(t[10]=n=>E("sms:",i.value)),to:"sms:"+(((ee=i.value)==null?void 0:ee.phone)||"")},{default:u(()=>[e("div",_t,[a(g,{name:"i-lucide-message-square-text",class:"size-6"})])]),_:1},8,["to"])])])],64)}}};export{Ct as default};
