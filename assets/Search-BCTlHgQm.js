import{_ as C}from"./Card-BQRz5rvr.js";import{x as S,r as n,o as U,z as g,c,a,b as o,_ as V,N,w as b,t as u,F as I,h as P,i as R,k as i,G as j}from"./index-BKCPoiO_.js";import{_ as q}from"./Input-DDE6Dtfm.js";import{g as F}from"./api-C3-D-LcZ.js";import{_ as T}from"./GridSkeleton-B4CDk_6i.js";import{_ as D}from"./GridCard-2lkemERU.js";import"./index-xsH4HHeE.js";import"./Skeleton-BBuTXwCT.js";const E={class:"fixed top-0 left-0 w-full h-13 shadow-md bg-white z-101"},G={class:"flex justify-between items-center gap-3 h-full px-2"},M={class:"py-13"},O={key:0,class:"p-3 h-screen w-full flex-center"},A={class:"text-sm"},H={key:1,class:"p-3"},J={class:"text-lg font-semibold mb-2"},K={key:2,class:"p-3"},L={class:"text-lg font-semibold mb-2"},W={key:3,class:"p-3"},X={class:"flex-center flex-col gap-2 h-20"},Y={class:"text-sm font-semibold"},ce=Object.assign({name:"search"},{__name:"Search",setup(Z){const m=S(),k=P(),x=R(),t=n(""),r=n(!0),l=n(null),d=n(null),_=n(!1);let f;U(()=>{t.value=m.search,console.log("value",t.value)}),g(()=>k.query,e=>{(e==null?void 0:e.back)=="is-back"&&(_.value=!0)},{immediate:!0}),g(t,()=>{r.value=!0,clearTimeout(f),f=setTimeout(()=>{$()},1500)});async function $(){let e=t.value;if(!(e.length<2))try{r.value=!0,d.value=l.value=null,m.setSearch(e);const s=await F(null,"search",{search:e},0,20);s.data&&(l.value=s.data||null),s.data||(d.value="No post found")}catch(s){d.value=s.toString()}finally{r.value=!1}}const y=()=>{x.back()};return(e,s)=>{var p;const h=V,w=q,z=j,B=C;return i(),c(I,null,[a("header",E,[a("div",G,[o(h,{icon:"i-lucide-arrow-left",size:"xl",color:"none",variant:"solid",onClick:y}),o(w,{modelValue:t.value,"onUpdate:modelValue":s[1]||(s[1]=v=>t.value=v),"trailing-icon":"i-lucide-search",placeholder:`${e.$t("message.search")}...`,size:"xl",class:"w-full",variant:"none",ui:{base:"text-default placeholder:text-default",trailingIcon:"text-default size-5"},autofocus:""},N({_:2},[(p=t.value)!=null&&p.length?{name:"trailing",fn:b(()=>[o(h,{color:"neutral",variant:"link",size:"xl",icon:"i-lucide-x","aria-label":"Clear input",onClick:s[0]||(s[0]=v=>t.value="")})]),key:"0"}:void 0]),1032,["modelValue","placeholder"])])]),a("main",M,[t.value.length<2?(i(),c("div",O,[a("p",A,u(e.$t("message.search_term")),1)])):r.value?(i(),c("div",H,[a("h1",J,u(e.$t("message.all_cars")),1),o(T,{leng:"4"})])):l.value&&l.value.length>0?(i(),c("div",K,[a("h1",L,u(e.$t("message.all_cars")),1),o(D,{posts:l.value,back:_.value},null,8,["posts","back"])])):(i(),c("div",W,[o(B,{variant:"outline",class:"rounded-md"},{default:b(()=>[a("div",X,[o(z,{name:"material-symbols:warning-rounded",class:"size-8"}),a("h2",Y,u(e.$t("message.not_found")),1)])]),_:1})]))])],64)}}});export{ce as default};
