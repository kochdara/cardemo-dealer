import{_ as I}from"./Skeleton-BBuTXwCT.js";import{v as N,r as i,o as P,aN as z,c as _,a,b as h,_ as E,t as p,e as x,F as g,d as y,h as F,i as J,k as r,w,g as B,m as $,q as O,J as U}from"./index-BKCPoiO_.js";import{c as V}from"./api-C3-D-LcZ.js";import{_ as W}from"./SkeletonRetry-DfYmiy5b.js";import"./index-xsH4HHeE.js";const q={class:"fixed top-0 left-0 w-full h-13 shadow-md background z-101"},D={class:"flex justify-start items-center gap-3 h-full px-2"},L={class:"truncate_wrap flex-1 text-white text-lg font-semibold"},M={class:"py-13"},A={class:"p-3 space-y-2"},G={class:"flex-1"},H={class:"flex-1"},K=["src","alt"],Q={class:"flex-center flex-col gap-1 p-2"},T={class:"text-sm"},X={class:"text-sm"},oe=Object.assign({name:"banks"},{__name:"BankSelection",setup(Y){const c=N(),v=F(),d=J(),j=i(0),f=i(!1),o=i(null),n=i(null);P(()=>{const t=c.product;k(),t||z(v,d,"home")});async function k(){try{n.value=o.value=null,f.value=!0;const t=await V("bank"),s=t.data;s&&(s.result?o.value=s.result||null:o.value=s||null,c.setBank(o.value||null),c.setBankIndex(o.value[0]||null)),t.data||(n.value="No bank found")}catch(t){n.value=t.toString()}finally{f.value=!1}}function C(t){var u,e;const s=JSON.parse(t),l=s.length-1;return`${(u=s[0])==null?void 0:u.rate}% - ${(e=s[l])==null?void 0:e.rate}%`}const R=()=>{d.back()},S=(t,s)=>{j.value=s,c.setBankIndex(t),U(v,d,"term-condition")};return(t,s)=>{const l=E,u=I;return r(),_(g,null,[a("header",q,[a("div",D,[h(l,{icon:"i-lucide-arrow-left",size:"xl",color:"primary",variant:"solid",onClick:R}),a("h2",L,p(t.$t("message.bank_selection")),1)])]),a("main",M,[a("div",A,[f.value?(r(),_(g,{key:0},y(2,e=>h(l,{key:e,color:"neutral",variant:"outline",class:"bg-white w-full flex items-center justify-between gap-3"},{default:w(()=>[a("div",G,[h(u,{class:"h-12 object-cover rounded-md"})])]),_:2},1024)),64)):n.value?(r(),x(W,{key:1,error:n.value,retryPage:k},null,8,["error"])):(r(!0),_(g,{key:2},y(o.value,(e,m)=>(r(),x(l,{key:m,color:"neutral",variant:"ghost",class:O("bg-white w-full border-default border-2 flex items-center justify-between gap-4"),onClick:b=>S(e,m)},{default:w(()=>[a("div",H,[a("img",{class:"h-10 object-contain sm:object-cover rounded-md",src:(e==null?void 0:e.logo)||B($),alt:e==null?void 0:e.title,onError:s[0]||(s[0]=b=>b.target.src=B($))},null,40,K)]),a("div",Q,[a("h3",T,p(t.$t("message.interest_rate")),1),a("p",X,p(C((e==null?void 0:e.listRate)||"[]")),1)])]),_:2},1032,["onClick"]))),128))])])],64)}}});export{oe as default};
