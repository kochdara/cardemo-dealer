import{aL as A,v as H,r as b,y as J,o as K,c as O,a as s,b as o,_ as Q,t as r,w as d,F as W,h as X,i as Y,k as L,g as u,m as _,e as Z,f as ee,G as se,I as w,s as te}from"./index-BKCPoiO_.js";import{_ as ae}from"./Card-BQRz5rvr.js";import{c as oe,d as le}from"./api-C3-D-LcZ.js";import{_ as ne}from"./ShareModal-CZbFMVR9.js";import"./index-xsH4HHeE.js";import"./Modal-BCB_kUz-.js";import"./useId-B5SgPQru.js";const re={class:"fixed top-0 left-0 w-full h-13 shadow-md background z-[101]"},ie={class:"flex justify-between items-center h-full px-2"},de={class:"truncate_wrap text-white text-lg font-semibold"},ue={class:"py-13"},ce={class:"relative"},me=["src"],fe={class:"absolute -bottom-6 left-0 right-0 flex-center"},pe=["src"],he={class:"flext-center p-8 pb-5"},_e={class:"text-lg text-center font-semibold"},ve={class:"p-3"},ge={class:"space-y-3"},be={class:"text-base font-semibold"},we={class:"flex items-center gap-2"},xe={class:"text-primary text-sm"},ke={class:"text-base font-semibold"},ye={class:"flex items-center gap-2"},Ce={class:"text-sm"},Ue={class:"text-base font-semibold"},$e={class:"flex items-center gap-2"},ze={class:"text-sm"},Ve={class:"text-base font-semibold"},Be={class:"flex items-center gap-2"},Fe={class:"text-sm"},Se={class:"fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 -shadow-lg z-[100]"},Ne={class:"grid grid-cols-2"},je={class:"flex flex-col items-center justify-center w-full gap-1"},Me={class:"flex flex-col items-center justify-center w-full gap-1"},Te={__name:"Contact",setup(Ee){const P=A(),x=H();X();const q=Y(),k=b(!1),t=b(null),v=b(null),f=J({});K(()=>{const e=x.contact;if(e!==null){t.value=e;return}D()});async function D(){try{v.value=t.value=null,k.value=!0;const e=await oe();e.data&&(t.value=e.data||null),x.setContact(e.data||null),e.data||(v.value="No contact found")}catch(e){v.value=e.toString()}finally{k.value=!1}}const G=()=>{q.back()},T=async e=>{let a=le+((e==null?void 0:e.username)||"");if(f.currentUrl=a,window.FlutterChannel)window.FlutterChannel.postMessage("link:"+a);else if(navigator.share)try{await navigator.share({title:(e==null?void 0:e.username)||"title",text:(e==null?void 0:e.phone)||"description",url:a})}catch(l){console.error("Share failed:",l)}else f.shared=!0},g=(e,a)=>{let l=(a==null?void 0:a.phone)||"";window.FlutterChannel&&window.FlutterChannel.postMessage(e+l)};return(e,a)=>{var C,U;const l=Q,y=ae,c=se;return L(),O(W,null,[s("header",re,[s("div",ie,[o(l,{icon:"i-lucide-arrow-left",size:"xl",color:"primary",variant:"solid",onClick:G}),s("h2",de,r(e.$t("message.contact")),1),o(l,{icon:"i-lucide-share-2",size:"xl",color:"primary",variant:"solid",onClick:a[0]||(a[0]=i=>T(t.value))}),o(ne,{modelValue:f.shared,"onUpdate:modelValue":a[1]||(a[1]=i=>f.shared=i),currentUrl:f.currentUrl||""},null,8,["modelValue","currentUrl"])])]),s("main",ue,[o(y,{variant:"soft",class:"bg-white shadow-sm rounded-none",ui:{body:"p-0 sm:p-0"}},{default:d(()=>{var i,p,h;return[s("div",ce,[s("img",{class:"w-full h-50 rounded-md object-cover",src:String(((i=t.value)==null?void 0:i.cover)||u(_)).replace("https://imagescdn.khmer24.com","https://images.khmer24.co"),alt:"cover",onError:a[2]||(a[2]=m=>m.target.src=u(_))},null,40,me),s("div",fe,[s("img",{class:"w-18 h-18 rounded-full border-4 border-white shadow-sm",src:String(((p=t.value)==null?void 0:p.photo)||u(_)).replace("https://imagescdn.khmer24.com","https://images.khmer24.co"),alt:"profile",onError:a[3]||(a[3]=m=>m.target.src=u(_))},null,40,pe)])]),s("div",he,[s("h2",_e,r(((h=t.value)==null?void 0:h.username)||"Unknown"),1)])]}),_:1}),s("div",ve,[o(y,{variant:"soft",class:"bg-white shadow-sm",ui:{body:"p-4 sm:p-4"}},{default:d(()=>{var i,p,h,m,$,z,V,B,F,S,N,j,M,E,I;return[s("div",ge,[o(l,{color:"neutral",variant:"ghost",class:"text-default",to:"tel:"+(((i=t.value)==null?void 0:i.phone)||""),ui:{base:"w-full p-0 pb-3 rounded-none flex flex-col items-start gap-1 border-default border-b"},onClick:a[4]||(a[4]=n=>g("call:",t.value))},{default:d(()=>{var n;return[s("h3",be,r(e.$t("message.phone_number")),1),s("div",we,[o(c,{name:"i-lucide-phone",class:"size-4"}),s("p",xe,r(((n=t.value)==null?void 0:n.phone)||"Unknown"),1)])]}),_:1},8,["to"]),(p=t.value)!=null&&p.email?(L(),Z(l,{key:0,color:"neutral",variant:"ghost",class:"text-default",to:"mailto:"+(((h=t.value)==null?void 0:h.email)||""),ui:{base:"w-full p-0 pb-3 rounded-none flex flex-col items-start gap-1 border-default border-b"}},{default:d(()=>{var n;return[s("h3",ke,r(e.$t("message.phone_number")),1),s("div",ye,[o(c,{name:"i-lucide-mail",class:"size-4"}),s("p",Ce,r(((n=t.value)==null?void 0:n.email)||"Unknown"),1)])]}),_:1},8,["to"])):ee("",!0),o(l,{color:"neutral",variant:"ghost",class:"text-default",to:u(w)((($=(m=t.value)==null?void 0:m.map)==null?void 0:$.x)||"",((V=(z=t.value)==null?void 0:z.map)==null?void 0:V.y)||""),ui:{base:"w-full p-0 pb-3 rounded-none flex flex-col items-start gap-1 border-default border-b"}},{default:d(()=>{var n,R;return[s("h3",Ue,r(e.$t("message.city_province")),1),s("div",$e,[o(c,{name:"i-lucide-map-pinned",class:"size-4"}),s("p",ze,r(u(P).en?((n=t.value)==null?void 0:n.province_en_name)||"Unknown":((R=t.value)==null?void 0:R.province_km_name)||"Unknown"),1)])]}),_:1},8,["to"]),o(l,{color:"neutral",variant:"ghost",class:"text-default",to:u(w)(((F=(B=t.value)==null?void 0:B.map)==null?void 0:F.x)||"",((N=(S=t.value)==null?void 0:S.map)==null?void 0:N.y)||""),ui:{base:"w-full p-0 pb-3 rounded-none flex flex-col items-start gap-1"}},{default:d(()=>{var n;return[s("h3",Ve,r(e.$t("message.address")),1),s("div",Be,[o(c,{name:"i-lucide-map-pin",class:"size-4"}),s("p",Fe,r(((n=t.value)==null?void 0:n.address)||"Unknown"),1)])]}),_:1},8,["to"]),o(l,{size:"xl",color:"primary",variant:"soft",class:"w-full flex-center mt-3",to:u(w)(((M=(j=t.value)==null?void 0:j.map)==null?void 0:M.x)||"",((I=(E=t.value)==null?void 0:E.map)==null?void 0:I.y)||"")},{default:d(()=>[te(r(e.$t("message.show_map")),1)]),_:1},8,["to"])])]}),_:1})])]),s("footer",Se,[s("div",Ne,[o(l,{color:"primary",variant:"soft",ui:{base:"w-full h-13 rounded-none bg-white"},onClick:a[5]||(a[5]=i=>g("call:",t.value)),to:"tel:"+(((C=t.value)==null?void 0:C.phone)||"")},{default:d(()=>[s("div",je,[o(c,{name:"i-lucide-phone",class:"size-6"})])]),_:1},8,["to"]),o(l,{color:"primary",variant:"soft",ui:{base:"w-full h-13 rounded-none bg-white"},onClick:a[6]||(a[6]=i=>g("sms:",t.value)),to:"sms:"+(((U=t.value)==null?void 0:U.phone)||"")},{default:d(()=>[s("div",Me,[o(c,{name:"i-lucide-message-square-text",class:"size-6"})])]),_:1},8,["to"])])])],64)}}};export{Te as default};
