import{r as o,o as R,L,M as z,c as E,a as l,b as f,_ as H,w as M,g as v,H as N,e as r,f as S,t as C,F as U,h as V,i as j,k as n,l as D}from"./index-BKCPoiO_.js";import{_ as F}from"./Input-DDE6Dtfm.js";import{g}from"./api-C3-D-LcZ.js";import{_ as h}from"./GridSkeleton-B4CDk_6i.js";import{_ as I}from"./SkeletonRetry-DfYmiy5b.js";import{_ as T}from"./GridCard-2lkemERU.js";import"./index-xsH4HHeE.js";import"./Card-BQRz5rvr.js";import"./Skeleton-BBuTXwCT.js";const A={class:"fixed top-0 left-0 w-full h-13 shadow-md background z-101"},O={class:"flex justify-between items-center gap-3 h-full px-2"},Y={class:"py-13"},q={class:"p-3"},G={class:"text-lg font-semibold mb-2"},ae=Object.assign({name:"listing"},{__name:"Listing",setup(J){const w=V(),y=j(),c=o(!1),a=o(null),t=o(null),m=o(20),u=o(20),d=o(!1),i=o(!1);R(()=>{_()});async function _(){try{t.value=a.value=null,c.value=!0;const e=await g(null,"listing",{},0,u.value);a.value=e.data||null,e.data||(t.value="No post found")}catch(e){t.value=e.toString()}finally{c.value=!1,window.scrollTo(0,0)}}const k=()=>{y.back()};async function b(){if(!i.value){i.value=!0;try{const s=(await g(null,"listing",{},m.value,u.value)).data||[];s.length===0?d.value=!1:(a.value||(a.value=[]),a.value.push(...s),m.value+=u.value),await x(1e3)}catch(e){t.value=e.toString()}finally{i.value=!1}}}function p(){const e=window.innerHeight+window.scrollY,s=document.documentElement.offsetHeight;!i.value&&e>=s-540&&b()}L(()=>{window.addEventListener("scroll",p)}),z(()=>{window.removeEventListener("scroll",p)});function x(e){return new Promise(s=>setTimeout(s,e))}return(e,s)=>{const $=H,B=F,P=N;return n(),E(U,null,[l("header",A,[l("div",O,[f($,{icon:"i-lucide-arrow-left",size:"xl",color:"primary",variant:"solid",onClick:k}),f(P,{to:v(D)(v(w),"search"),class:"w-full cursor-pointer"},{default:M(()=>[f(B,{"trailing-icon":"i-lucide-search",placeholder:`${e.$t("message.search")}...`,size:"lg",class:"w-full pointer-events-none",variant:"none",disabled:"",ui:{base:"text-white placeholder:text-white bg-neutral-500/50",trailingIcon:"text-white"}},null,8,["placeholder"])]),_:1},8,["to"])])]),l("main",Y,[l("div",q,[l("h1",G,C(e.$t("message.all_cars")),1),c.value?(n(),r(h,{key:0,leng:"4"})):t.value?(n(),r(I,{key:1,error:t.value,retryPage:_},null,8,["error"])):(n(),r(T,{key:2,posts:a.value},null,8,["posts"])),d.value&&!t.value?(n(),r(h,{key:3,leng:"4",class:"mt-3"})):S("",!0)])])],64)}}});export{ae as default};
