import{_ as T}from"./Card-BQRz5rvr.js";import{u as U,r as _,o as V,c as m,a as t,b as c,w as f,F as R,d as z,e as p,f as E,t as n,g as o,_ as I,h as L,i as P,j as A,k as a,l as h,m as b,n as F,p as q,q as M,s as O}from"./index-BKCPoiO_.js";import{_ as G}from"./Carousel-Dr4w24T6.js";import{g as H,a as J}from"./api-C3-D-LcZ.js";import{_ as K}from"./GridSkeleton-B4CDk_6i.js";import{_ as Q}from"./SkeletonRetry-DfYmiy5b.js";import{_ as W}from"./GridCard-2lkemERU.js";import"./index-xsH4HHeE.js";import"./Skeleton-BBuTXwCT.js";const X={class:"py-13"},Y={class:"bg-white p-3"},Z={class:"relative w-full h-60"},D={class:"relative w-full h-60"},ss=["src","alt"],ts={class:"absolute w-full bottom-0 p-4"},os={class:"truncate_wrap text-white text-xl font-simibold mb-2"},ls={class:"flex"},es={class:"flex items-center gap-2 rounded-full shadow-sm bg-neutral-500/50 p-1 py-0.5 pr-3"},as={class:"text-lg text-white"},rs={class:"text-sm text-white border-l-2 pl-2"},ns={class:"absolute bottom-5 right-5 z-100 flex gap-2"},is=["onClick"],cs={class:"px-3 pt-2 pb-3"},us={class:"flex items-center justify-between mb-2"},ds={class:"text-lg font-semibold"},_s={class:"bg-white px-3 pt-2 pb-5"},fs={class:"flex items-center justify-between mb-2"},ps={class:"text-lg font-semibold"},hs={class:"flex overflow-auto gap-3"},gs={class:"relative h-40"},vs=["src","alt"],ms={class:"absolute w-full bottom-0 p-3"},bs={class:"truncate_wrap text-white text-base font-simibold"},Bs=Object.assign({name:"home"},{__name:"Index",setup(ys){const u=L();P();const k=U("carousel"),g=_(0),y=_(!1),i=_(null),w=_(null),d=_(null);function N(e){g.value=e}function S(e){var l,v;g.value=e,(v=(l=k.value)==null?void 0:l.emblaApi)==null||v.scrollTo(e)}V(()=>{$()});async function $(){try{d.value=i.value=null,y.value=!0;const e=await H(),l=await J();i.value=e.data||null,w.value=l.data||null,(!e.data||!l.data)&&(d.value="No post found")}catch(e){d.value=e.toString()}finally{y.value=!1,window.scrollTo(0,0)}}return(e,l)=>{const v=F,C=A("RouterLink"),j=G,x=I,B=T;return a(),m("main",X,[t("div",Y,[t("div",Z,[c(j,{ref_key:"carousel",ref:k,items:i.value,class:"w-full",onSelect:N,autoplay:{delay:1e4}},{default:f(({item:s})=>[c(C,{to:o(h)(o(u),"detail",{slug:s==null?void 0:s.ad_model,id:s==null?void 0:s.id})},{default:f(()=>[t("div",D,[t("img",{src:String((s==null?void 0:s.thumb)||o(b)).replace("https://imagescdn.khmer24.com","https://images.khmer24.co"),class:"rounded-md w-full h-full object-cover",alt:s==null?void 0:s.title,onError:l[0]||(l[0]=r=>r.target.src=o(b))},null,40,ss),l[2]||(l[2]=t("div",{class:"absolute top-0 left-0 w-full h-full bg-black opacity-25 rounded-md"},null,-1)),t("div",ts,[t("h2",os,n((s==null?void 0:s.title)||""),1),t("div",ls,[t("div",es,[c(v,{text:"$",size:"xs",class:"background",ui:{fallback:"text-white text-base"}}),t("p",as,n(o(q)((s==null?void 0:s.ad_price)||"")),1),t("p",rs,n(String((s==null?void 0:s.ad_condition)||"")),1)])])])])]),_:2},1032,["to"])]),_:1},8,["items"]),t("div",ns,[(a(!0),m(R,null,z(i.value,(s,r)=>(a(),m("span",{key:r,class:M(["w-2 h-2 rounded-full cursor-pointer transition-opacity",{"bg-white opacity-100":g.value===r,"bg-white/50 opacity-50":g.value!==r}]),onClick:xs=>S(r)},null,10,is))),128))])])]),t("div",cs,[t("div",us,[t("h1",ds,n(e.$t("message.recent_cars")),1),c(x,{"trailing-icon":"i-lucide-arrow-right",variant:"outline",size:"lg",to:o(h)(o(u),"listing")},null,8,["to"])]),y.value?(a(),p(K,{key:0,leng:"4"})):d.value?(a(),p(Q,{key:1,error:d.value,retryPage:$},null,8,["error"])):(a(),p(W,{key:2,posts:i.value},null,8,["posts"])),i.value?(a(),p(x,{key:3,"trailing-icon":"i-lucide-chevron-right",size:"xl",class:"w-full mt-4 flex-center",color:"primary",variant:"subtle",to:o(h)(o(u),"listing")},{default:f(()=>[O(n(e.$t("message.view_all")),1)]),_:1},8,["to"])):E("",!0)]),t("div",_s,[t("div",fs,[t("h1",ps,n(e.$t("message.latest_news")),1),c(x,{"trailing-icon":"i-lucide-arrow-right",variant:"outline",size:"lg",to:o(h)(o(u),"news")},null,8,["to"])]),t("div",hs,[(a(!0),m(R,null,z(w.value,s=>(a(),p(B,{key:s==null?void 0:s.id,variant:"soft",ui:{body:"p-0 sm:p-0"},class:"bg-white shadow-sm min-w-5/6 max-w-5/6"},{default:f(()=>[c(C,{to:o(h)(o(u),"news-detail",{slug:"detail",id:s==null?void 0:s.id})},{default:f(()=>[t("div",gs,[t("img",{class:"w-full h-full rounded-md object-cover",src:String((s==null?void 0:s.image)||o(b)),alt:(s==null?void 0:s.title)||"",onError:l[1]||(l[1]=r=>r.target.src=o(b))},null,40,vs),l[3]||(l[3]=t("div",{class:"absolute top-0 left-0 w-full h-full bg-black opacity-25 rounded-md"},null,-1)),t("div",ms,[t("h2",bs,n((s==null?void 0:s.title)||""),1)])])]),_:2},1032,["to"])]),_:2},1024))),128))])])])}}});export{Bs as default};
